var ee=Object.defineProperty,te=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var W=(t,e,n)=>e in t?ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j=(t,e)=>{for(var n in e||(e={}))se.call(e,n)&&W(t,n,e[n]);if(P)for(var n of P(e))ae.call(e,n)&&W(t,n,e[n]);return t},O=(t,e)=>te(t,ne(e));const re=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};re();var ie="./assets/speen.d7e67bf9.svg";const ce="https://tgproxy.ovo.ovh/wiki";async function oe(t){const n=`/api.php?action=parse&page=${encodeURIComponent(t)}&prop=text&format=json`;return(await(await fetch(ce+n)).json()).parse.text["*"]}function A(){return new Promise(t=>{requestAnimationFrame(()=>t())})}function le(t){return new Promise(e=>{setTimeout(()=>e(),t)})}const N=[];function T(t){N.push(...t)}function de(){const t=document.createElement("ul"),e=document.createElement("div");let n=0,a=[],s=!1;const r=o=>{s&&document.querySelector(".page.active").dataset.tab!==o.page&&q.instance.setActive(o.page),o.element.scrollIntoView({block:o.alignment,inline:"nearest",behavior:"auto"}),document.querySelectorAll(".bgus_fz_selected").forEach(f=>f.classList.remove("bgus_fz_selected")),o.element.classList.add("bgus_fz_selected")},i=o=>{n=o,t.querySelectorAll(".selected").forEach(f=>f.classList.remove("selected")),t.children[o].classList.add("selected"),r(a[o])},c=async(o,f)=>{if(!o||o.length<1)return;let m=N;if(s=o[0]==="@",s?o=o.substr(1):m=N.filter(p=>p.page===f),o.length<1)return;const b=o.split("").map(p=>["\\","]","^"].includes(p)?`\\${p}`:p).join("])(.*?)(["),v=new RegExp(`^(.*?)([${b}])(.*?)$`,"i");a=m.map(p=>O(j({},p),{matches:(p.name.match(v)||[]).slice(1).reduce((u,h,g,y)=>(g<2?u.push([h]):y[g-1]===""?u[u.length-1].push(h):h!==""&&u.push([h]),u),[]).map(u=>u.join(""))})).filter(p=>p.matches.length>0).sort((p,u)=>{const h=p.id,g=p.matches,y=u.id,_=u.matches;if(g.length===1&&_.length!==1)return-1;if(g.length!==1&&_.length===1)return 1;const B=L=>!/[^a-zA-Z0-9]*$/.test(L),G=g.filter(B).length-_.filter(B).length;if(G!==0)return G;for(let L=0;L<Math.min(g.length,_.length)-1;L+=2){const D=g[L].length-_[L].length;if(D!==0)return D}const R=g.length-_.length;return R!==0?R:h-y}),await A(),t.innerHTML="",a.forEach(p=>{const u=document.createElement("li");if(p.matches.forEach((h,g)=>{const y=document.createElement(g%2?"strong":"span");y.appendChild(document.createTextNode(h)),u.appendChild(y)}),s){const h=document.createElement("span");h.className="source",h.appendChild(document.createTextNode(p.page.replace(/_/g," "))),u.appendChild(h)}u.addEventListener("click",()=>{r(p),e.classList.add("bgus_hidden")}),t.appendChild(u)}),a.length>0&&i(0)},d=document.createElement("input");let l="";return d.addEventListener("keyup",o=>{switch(o.code){case"Escape":e.classList.add("bgus_hidden");return;case"Enter":a.length>0&&r(a[n]),e.classList.add("bgus_hidden");return;case"ArrowDown":n<a.length-1&&i(n+1);return;case"ArrowUp":n>0&&i(n-1);return;default:if(d.value!==l){const f=document.querySelector(".page.active");c(d.value,f.dataset.tab),l=d.value}}}),document.body.addEventListener("keyup",o=>{o.code==="KeyS"&&d.focus()}),document.body.addEventListener("keydown",o=>{if(o.shiftKey)switch(o.code){case"KeyS":{e.classList.remove("bgus_hidden"),d.value="";break}}}),e.id="bgus_fz_searchbox",e.classList.add("bgus_hidden"),e.appendChild(d),e.appendChild(t),e}function I(t,e){let n=t.parentElement;for(;n!=null&&!e(n);)n=n.parentElement;return n}function E(t){const[e,...n]=Array.from(t.querySelectorAll("tr")),a=Array.from(e.querySelectorAll("th")).map(s=>s.textContent.trim());return n.map(s=>{const r={};return s.querySelectorAll("td,th").forEach((i,c)=>{r[a[c]]=i}),r})}function k(t,e,n){const a=document.createElement("table");if(e.length<1)return a;const s=document.createElement("tr");return t.forEach(r=>{const i=document.createElement("th");i.appendChild(document.createTextNode(r)),s.appendChild(i)}),a.appendChild(s),e.forEach(r=>{const i=document.createElement("tr");t.forEach(c=>{let d=null;r[c].tagName==="TD"||r[c].tagName==="TH"?d=r[c]:(d=document.createElement("td"),d.appendChild(r[c])),i.appendChild(d)}),n&&n(r,i),a.appendChild(i)}),a}function ue(t){t.querySelectorAll("table.wikitable > tbody > tr:not(:first-child) > td:nth-child(2), .tooltiptext").forEach(e=>{const n=e.cloneNode();Array.from(e.childNodes).forEach(a=>{a instanceof HTMLParagraphElement?n.append(...a.childNodes):n.append(a)}),e.parentNode.replaceChild(n,e)}),Array.from(t.querySelectorAll("td")).filter(e=>e.textContent.indexOf(" part")>=0).forEach(e=>{e.innerHTML=e.innerHTML.replace(/((\d+)\s+(?:parts?|units?))(.*?(?:<\/a>|\n|$))/gi,(n,...[a,s,r])=>`<label class="bgus_part ${r.includes("</a>")?"bgus_part_tooltip":""}" data-amount="${s}"><input type="checkbox" class='bgus_checkbox bgus_hidden'/> <span class="bgus_part_label" data-src="${a}">${a}</span></label>${r.replace(/(<a .+?<\/a>)/gi,'<span class="bgus_nobreak bgus_nested_element">$1<span class="bgus_twistie"></span></span>')}`)}),t.querySelectorAll(".bgus_part").forEach(e=>{"parts"in e.parentElement.dataset?e.parentElement.dataset.parts=(parseInt(e.parentElement.dataset.parts,10)+parseInt(e.dataset.amount,10)).toString():e.parentElement.dataset.parts=e.dataset.amount}),t.querySelectorAll("div[data-name] .wikitable.sortable tr").forEach(e=>{const a=I(e,h=>"name"in h.dataset&&h.dataset.name!=="").dataset.name;if(e.querySelector("td")===null){e.querySelectorAll("th").forEach((g,y)=>{if(y<2){g.classList.add("table-head");return}g.parentElement.removeChild(g)});return}const s=Array.from(e.querySelectorAll("td")).slice(1);let r=null,i=null,c=null,d=null,l=null,o=null,f=null,m=null;switch(a){case"Components":[c,l]=s;break;case"Virology Recipes":[l]=s;break;case"Narcotics":[c,l,o,f,m]=s;break;case"Other Reagents":[c,l,o]=s;break;case"Explosive Strength":[r,l,i]=s;break;case"Mutation Toxins":[l,o]=s;break;default:[c,d,l,o,f,m]=s}const b=e.querySelector("th"),v=b.querySelector("p"),p=v==null?void 0:v.innerHTML;v&&b.removeChild(v);let u=`<div class="reagent-header">${b.innerHTML}</div>`;p&&(u+=`<p class="ph-data">${p}</p>`),d&&(u+=`<p class="treatment">${d.innerHTML}</p>`),o&&(u+=`<p class="metabolism">${o.innerHTML}</p>`),r&&(u+=`<p class="conditions">${r.innerHTML}</p>`),i&&(u+=`<p class="explosive">${i.innerHTML}</p>`),m&&m.innerHTML.trim()!=="N/A"&&(u+=`<p class="addiction">${m.innerHTML}</p>`),f&&f.innerHTML.trim()!=="N/A"&&(u+=`<p class="overdose">${f.innerHTML}</p>`),l&&(u+=`<p>${l.innerHTML}</p>`),c&&(u+=`<div class="ph">${c.innerHTML}</div>`),b.classList.add("reagent-ext"),b.innerHTML=u,l&&l.parentElement.removeChild(l),d&&d.parentElement.removeChild(d),o&&o.parentElement.removeChild(o),r&&r.parentElement.removeChild(r),i&&i.parentElement.removeChild(i),f&&f.parentElement.removeChild(f),m&&m.parentElement.removeChild(m),c&&c.parentElement.removeChild(c)})}function fe(t){t.querySelectorAll(".bgus_part_tooltip > .bgus_checkbox").forEach(s=>{const r=s.parentElement.nextElementSibling;s.addEventListener("click",()=>{r.querySelectorAll(".bgus_checkbox").forEach(i=>{i.checked=s.checked})})}),t.querySelectorAll(".bgus_nested_element").forEach(s=>{s.addEventListener("click",()=>{s.classList.toggle("bgus_collapsed")})});const e=(s,r)=>{s.forEach(i=>{const c=i.parentElement.dataset.amount,d=i.parentElement.parentElement.dataset.parts,l=Math.ceil(r*(c/d));i.innerHTML=`${l} ml`;let o=i.parentElement.nextElementSibling;for(;o;){if(o.classList.contains("tooltip")){const f=[];o.querySelector(".tooltiptext").childNodes.forEach(m=>{m.classList&&m.classList.contains("bgus_part")&&f.push(m.querySelector(".bgus_part_label"))}),e(f,l)}if(o.classList.contains("bgus_part"))break;o=o.nextElementSibling}})},n=Array.from(t.querySelectorAll("table.wikitable > tbody > tr:not(:first-child)"));T(Array.from(t.querySelectorAll("table.wikitable > tbody > tr:not(:first-child) th .reagent-header")).map((s,r)=>({page:"Guide_to_chemistry",name:s.textContent.trim().replace(/\n.+$/gm,"").replace("\u25AE",""),element:s.parentElement,alignment:"center",id:r}))),document.body.addEventListener("keydown",s=>{if(s.shiftKey)switch(s.code){case"KeyC":{t.classList.toggle("bgus_cbox"),t.querySelectorAll(".bgus_checkbox:checked").forEach(r=>{r.checked=!1});break}case"KeyB":{const r=parseInt(prompt("Write target ml (0 to reset)","90"),10);if(Number.isNaN(r)||r<=0){t.querySelectorAll(".bgus_part_label").forEach(i=>{i.innerHTML=i.dataset.src});return}e(t.querySelectorAll("td > .bgus_part > .bgus_part_label"),+r);break}}});const a=/<b>(.+):<\/b>(.+)/i;n.forEach(s=>{s.querySelectorAll(".ph").forEach(r=>{const i=[],c=document.createElement("table"),d=document.createElement("tr"),l=document.createElement("tr");c.appendChild(d),c.appendChild(l),r.innerHTML.split("<br>").forEach(o=>{if(o.trim()==="N/A")return;const f=a.exec(o);if(!f){i.push(o);return}const[m,b]=f.slice(1).map(u=>u.trim()),v=document.createElement("th");v.appendChild(document.createTextNode(m)),d.appendChild(v);const p=document.createElement("td");p.appendChild(document.createTextNode(b)),l.append(p)}),r.innerHTML="",d.children.length>0&&r.appendChild(c),r.innerHTML+=`<p>${i.join("<br>")}</p>`,r.classList.add("ph-ext")})})}function pe(t){const e=t.querySelector("#Simple_Diseases .wikitable"),n=E(e).map(c=>{const d=document.createElement("td");return d.innerHTML=`
    <div class="disease-name">${c["Disease Name"].innerHTML}</div>
    <p class="vector">${c["Vector Name"].innerHTML}</p>
    <p class="source">${c.Source.innerHTML}</p>
    <p class="spread">${c.Spread.innerHTML}</p>
    <p class="description">${c.Description.innerHTML}</p>
    `,{Disease:d,Cure:c.Cure}}),a=k(["Disease","Cure"],n);a.className="disease-ext wikitable",e.replaceWith(a);const s=t.querySelector("#Symptoms_Table .wikitable"),r=E(s).sort((c,d)=>parseInt(c.Level.textContent,10)-parseInt(d.Level.textContent,10)).map(c=>{const d=document.createElement("td");d.innerHTML=`
    <div class="disease-name">${c.Symptom.innerHTML}</div>
    <p class="level">${c.Level.innerHTML}</p>
    <p class="chemical">${c["Required Chemical"].innerHTML}</p>
    <p class="description">${c.Effect.innerHTML}</p>
    `;const l=document.createElement("td");l.innerHTML=`
    <table class="stats">
      <tr><th>Stealth</th><td>${c.Stealth.innerHTML}</td></tr>
      <tr><th>Resistance</th><td>${c.Resistance.innerHTML}</td></tr>
      <tr><th>Stage speed</th><td>${c["Stage speed"].innerHTML}</td></tr>
      <tr><th>Transmission</th><td>${c.Transmission.innerHTML}</td></tr>
    </table>
    `;const o=c["Threshold (hover mouse over for details)"];return o.innerHTML=`<ul class="thresholds"><li>${o.innerHTML.split(",").join("</li><li>")}</li></ul>`,{Symptom:d,Stats:l,Thresholds:o}}),i=k(["Symptom","Stats","Thresholds"],r);i.className="symptoms-ext wikitable",s.replaceWith(i)}function me(t){const e=Array.from(t.querySelectorAll(".disease-ext tr:not(:first-child)"));T(e.map((a,s)=>({page:"Infections",name:a.querySelector(".disease-name").textContent.trim(),element:a,alignment:"center",id:s})));const n=Array.from(t.querySelectorAll(".symptoms-ext > tbody > tr:not(:first-child)"));T(n.map((a,s)=>({page:"Infections",name:a.querySelector(".disease-name").textContent.trim(),element:a,alignment:"center",id:s})))}function he(t){const e=[],n=[];t.querySelectorAll(".wikitable").forEach(l=>{const o=l.querySelector("tr");!o.innerHTML.includes("Picture")||(o.childElementCount===3&&e.push(l),o.childElementCount>3&&n.push(l))}),e.forEach(l=>{const o=l.querySelector("tr").querySelectorAll("th,td"),f=o[1].innerText.trim(),m=o[2].innerText.trim(),b=[];l.querySelectorAll("tr:not(:first-child)").forEach(p=>{const u=p.querySelectorAll("th,td"),h=document.createElement("td");h.innerHTML=`<div class="food-block">
<div class="food-pic">${u[0].innerHTML}</div>
<div class="food-name">${u[1].innerHTML}</div>
</div>
`,b.push({[f]:h,[m]:u[2]})});const v=k([f,m],b);v.className="food-base-ext wikitable",l.replaceWith(v)});const a=t.querySelector("#Recipe_Books .wikitable"),s=E(a).map(l=>{const o=document.createElement("td");return o.innerHTML=`<div class="food-pic">${l.Picture.innerHTML}</div>
<div class="food-name">${l.Book.innerHTML}</div>
<p class="unlocks">${l.Unlocks.innerHTML}</p>
<p class="notes">${l.Notes.innerHTML}</p>
`,{Book:o,"Where to get":l["Where to get"]}}),r=k(["Book","Where to get"],s);r.className="book-ext wikitable",a.replaceWith(r),n.forEach(l=>{const o=l.querySelector("tr").querySelectorAll("td,th"),f=o[0].innerText.trim(),m=o[1].innerText.trim(),b=o[2].innerText.trim(),v=E(l).map(u=>{const h=document.createElement("td");h.innerHTML=`
<div class="food-pic">${u[f].innerHTML}</div>
<div class="food-name">${u[m].innerHTML}</div>
${"Nutritional Value"in u?`<p class="nutrition">${u["Nutritional Value"].innerHTML}</p>`:""}
${"Notes"in u?`<p class="notes">${u.Notes.innerHTML}</p>`:""}
`;const g=u[b].innerHTML.split(/,|\+/gi).map(y=>`<p>${y.trim()}</p>`);return u[b].innerHTML=g.join(""),{Food:h,Ingredients:u[b]}}),p=k(["Food","Ingredients"],v);p.className="recipe-ext wikitable",l.replaceWith(p)});const i=t.querySelector("#Custom_Recipes .wikitable"),c=E(i).map(l=>(l["Custom food"].innerHTML=`<div class="food-name">${l["Custom food"].innerHTML}</div>`,l)),d=k(Object.keys(c[0]),c);d.className="food-base-ext wikitable",i.replaceWith(d)}function ge(t){t.querySelectorAll(".bgus_nested_element").forEach(n=>{n.addEventListener("click",()=>{n.classList.toggle("bgus_collapsed")})});const e=Array.from(t.querySelectorAll(".drink-ext tr:not(:first-child), .food-base-ext tr:not(:first-child), .food-ext tr:not(:first-child), .recipe-ext tr:not(:first-child)"));T(e.map((n,a)=>({page:"Guide_to_food",name:n.querySelector(".food-name").textContent.trim(),element:n,alignment:"center",id:a})))}function be(t){const e=[],n=[];t.querySelectorAll(".wikitable").forEach(a=>{const s=a.querySelector("tr");if(!!s.innerHTML.includes("Picture")){if(s.childElementCount===3){n.push(a);return}e.push(a)}}),e.forEach(a=>{const s=E(a).map(i=>{const c=document.createElement("td");c.innerHTML=`
<div class="food-pic">${i.Picture.innerHTML}</div>
<div class="food-name">${i.Cocktail.innerHTML}</div>
<p class="strength">${i.Strength.innerHTML}</p>
<p class="description">${i["Drink Description"].innerHTML}</p>
${"Notes"in i?`<p class="notes">${i.Notes.innerHTML}</p>`:""}
`;const d=i.Ingredients.innerHTML.split(/,|\+/gi).map(l=>`<p>${l.trim()}</p>`);return i.Ingredients.innerHTML=d.join(""),{Drink:c,Ingredients:i.Ingredients}}),r=k(["Drink","Ingredients"],s);r.className="drink-ext wikitable",a.replaceWith(r)}),n.forEach(a=>{const s=E(a).map(i=>{const c=document.createElement("td");return c.innerHTML=`<div class="food-pic">${i.Picture.innerHTML}</div>
      <div class="food-name">${i.Dispenses.innerHTML}</div>`,{Dispenses:c,Description:i.Description}}),r=k(["Dispenses","Description"],s);r.className="junk-ext wikitable",a.replaceWith(r)})}function ve(t){const e=Array.from(t.querySelectorAll(".drink-ext tr:not(:first-child), .food-base-ext tr:not(:first-child), .food-ext tr:not(:first-child), .junk-ext tr:not(:first-child)"));T(e.map((n,a)=>({page:"Guide_to_drinks",name:n.querySelector(".food-name").textContent.trim(),element:n,alignment:"center",id:a})))}function x(t,e){const n=Array.from(t.querySelectorAll(".mw-headline-cont[id][data-name]"));T(n.map((a,s)=>({id:s,page:e,name:a.dataset.name.trim(),element:a,alignment:"start"})))}const V={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var C=(t=>(t[t.RGB=0]="RGB",t[t.HEX=1]="HEX",t))(C||{});function X({h:t,s:e,v:n}){const a=Math.floor(t*6),s=t*6-a,r=n*(1-e),i=n*(1-s*e),c=n*(1-(1-s)*e);switch(a%6){case 0:return{r:n,g:c,b:r};case 1:return{r:i,g:n,b:r};case 2:return{r,g:n,b:c};case 3:return{r,g:i,b:n};case 4:return{r:c,g:r,b:n};case 5:return{r:n,g:r,b:i};default:throw new Error("unreacheable")}}function Z({r:t,g:e,b:n}){const a=Math.max(t,e,n),s=Math.min(t,e,n),r=a,i=a-s,c=a===0?0:i/a;let d;if(a===s)d=0;else{switch(a){case t:d=(e-n)/i+(e<n?6:0);break;case e:d=(n-t)/i+2;break;case n:d=(t-e)/i+4;break;default:throw new Error("unreacheable")}d/=6}return{h:d,s:c,v:r}}function ye(t){if(V[t])return M(V[t]);const e=document.createElement("div");e.style.color=t,document.body.appendChild(e);const a=window.getComputedStyle(e).getPropertyValue("color");return document.body.removeChild(e),M(a)}function M(t){if(t[0]==="#"){const e=(t.length-1)/3,n=[17,1,.062272][e-1];return{r:Math.round(parseInt(t.substr(1,e),16)*n)/256,g:Math.round(parseInt(t.substr(1+e,e),16)*n)/256,b:Math.round(parseInt(t.substr(1+2*e,e),16)*n)/256}}if(t.startsWith("rgb")){const e=t.split("(")[1].split(")")[0].split(",").map(n=>parseInt(n,10)).map(Math.round);return{r:e[0]/256,g:e[1]/256,b:e[2]/256}}return ye(t)}function J(t,e){const n=Math.round(t.r*255),a=Math.round(t.g*255),s=Math.round(t.b*255);switch(e){case 0:return`rgb(${n}, ${a}, ${s})`;case 1:{const r=`00${n.toString(16)}`.slice(-2),i=`00${a.toString(16)}`.slice(-2),c=`00${s.toString(16)}`.slice(-2);return`#${r}${i}${c}`}default:return"#000"}}function H(t,e){const n=M(t),a=Z(n);a.s<.15?(a.h=.6,a.s=.5,a.v=Math.max(.2,1-a.v)):a.v>.5&&(a.v=.4,a.s>.2&&(a.s=Math.min(1,a.s+.2)));const s=X(a);return J(s,e)}function ke(t,e){const n=M(t),a=Z(n);a.v<.5&&(a.v=.8),a.s>.7&&(a.s=Math.min(1,a.s-.3),a.v=1),Math.abs(a.h-.666)<.1&&(a.h-=.13,a.v=Math.min(1,a.v+.1));const s=X(a);return J(s,e)}function Ee(t){return t==="H1"||t==="H2"||t==="H3"}function _e(t,e){const n=document.createElement("h1");n.className="pageheader",n.appendChild(document.createTextNode(e.replace(/_/g," "))),t.insertBefore(n,t.firstChild),t.querySelectorAll("img").forEach(s=>s.setAttribute("loading","lazy")),t.querySelectorAll(".mw-editsection").forEach(s=>{s.parentElement.removeChild(s)}),t.querySelectorAll("*[bgcolor]").forEach(s=>{let r=s.getAttribute("bgcolor");r.length===6&&!Number.isNaN(parseInt(r,16))&&(r=`#${r}`),s.setAttribute("bgcolor",H(r,C.HEX).slice(1))}),t.querySelectorAll("*[style]").forEach(s=>{s.style.backgroundColor!==""&&(s.style.backgroundColor=H(s.style.backgroundColor,C.RGB)),s.style.background!==""&&(s.style.backgroundColor=H(s.style.background,C.RGB))}),t.querySelectorAll("*[color]").forEach(s=>{let r=s.getAttribute("color");r.length===6&&!Number.isNaN(parseInt(r,16))&&(r=`#${r}`),s.setAttribute("color",ke(r,C.HEX).slice(1))}),t.querySelectorAll("table[width]").forEach(s=>{s.setAttribute("width","100%")}),t.querySelectorAll("table[style]").forEach(s=>{s.style.width!==""&&(s.style.width="100%")}),t.querySelectorAll("table .floatright > a > img").forEach(s=>{const r=I(s,c=>c instanceof HTMLTableRowElement),i=document.createElement("td");r.appendChild(i)});const a=t.querySelector("#toc");if(a){const s=a.querySelector("h2");a.parentNode.insertBefore(s,a);const r=a.querySelector("#toctitle");r!=null&&a.removeChild(r)}t.querySelectorAll("h1,h2,h3").forEach(s=>{const r=s.parentNode,i=document.createElement("div");for(r.insertBefore(i,s);s.nextSibling&&!Ee(s.nextSibling.nodeName);){const c=s.nextSibling;r.removeChild(c),i.appendChild(c)}s.parentNode.removeChild(s),i.insertBefore(s,i.firstChild),i.className="mw-headline-cont"}),t.querySelectorAll("h1 .mw-headline, h2 .mw-headline, h3 .mw-headline").forEach(s=>{const r=I(s,i=>i.classList.contains("mw-headline-cont"));r&&r.querySelectorAll("h1 .mw-headline, h2 .mw-headline, h3 .mw-headline").length===1?(r.id=s.id,s.id+="-span",r.dataset.name=s.textContent):(s.dataset.name=s.textContent,s.classList.add("mw-headline-cont"))})}function Le(t){t.querySelectorAll("div.hidden").forEach(e=>{e.style.display="block",e.style.opacity="1"}),t.querySelector(".action_buttons").style.display="none",t.classList.remove("center")}function Se(t){const e=t.querySelector(".action_buttons");t.querySelectorAll("div[data-name]").forEach(n=>{const{name:a}=n.dataset,s=document.createElement("button");s.className="pretty-button",s.appendChild(document.createTextNode(a)),s.addEventListener("click",async()=>{Le(t),await A(),n.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}),e.appendChild(s)})}const S={Infections:"fcebeda2fddb46d924f4538cd9c0daeb55aa4c9b",Guide_to_food:"7602c610eae1cc9f04670781f78470dfcb62d8ae",Guide_to_drinks:"7602c610eae1cc9f04670781f78470dfcb62d8ae",Guide_to_chemistry:"5074d6180fc8b283bac00b99c6aa2325b797da6b",$DEFAULT:"5074d6180fc8b283bac00b99c6aa2325b797da6b"},Te=440;function xe(t,e){try{_e(t,e)}catch{console.error(`Error processing page: ${e}`)}try{switch(e){case"Guide_to_chemistry":ue(t);break;case"Infections":pe(t);break;case"Guide_to_food":he(t);break;case"Guide_to_drinks":be(t);break;default:}}catch(n){console.error(`Error processing page: ${e} (specific enhancements)`),console.error(n)}}function Ce(t,e){document.querySelectorAll("img[width]").forEach(n=>{const a=n.getAttribute("width");if(a.includes("%"))return;parseInt(a,10)>Te&&(n.setAttribute("width","100%"),n.removeAttribute("height"))})}function Q(t,e){switch(e){case"Guide_to_chemistry":x(t,e),fe(t);break;case"Infections":x(t,e),me(t);break;case"$Welcome":Se(t);break;case"Guide_to_food":x(t,e),ge(t);break;case"Guide_to_drinks":x(t,e),ve(t);break;default:x(t,e);break}}class we{constructor(e="tg-cache",n="keyval"){this.storeName=n,this.dbp=new Promise((a,s)=>{const r=indexedDB.open(e,1);r.onerror=()=>s(r.error),r.onsuccess=()=>a(r.result),r.onupgradeneeded=()=>{r.result.createObjectStore(n)}})}withIDBStore(e,n){return this.dbp.then(a=>new Promise((s,r)=>{const i=a.transaction(this.storeName,e);i.oncomplete=()=>s(),i.onabort=()=>r(i.error),i.onerror=()=>r(i.error),n(i.objectStore(this.storeName))}))}}let $;function w(){return $||($=new we),$}function Me(t,e=w()){let n;return e.withIDBStore("readonly",a=>{n=a.get(t)}).then(()=>n.result)}function Ae(t,e,n,a=w()){return a.withIDBStore("readwrite",s=>{s.put({version:n,value:e},t)})}function qe(t,e=w()){return e.withIDBStore("readwrite",n=>{n.delete(t)})}function He(t=w()){return t.withIDBStore("readwrite",e=>{e.clear()})}function $e(t=w()){const e=[];return t.withIDBStore("readonly",n=>{(n.openKeyCursor||n.openCursor).call(n).onsuccess=function(){!this.result||(e.push(this.result.key),this.result.continue())}}).then(()=>e)}var U={get:Me,set:Ae,keys:$e,del:qe,clear:He},Y="./assets/unknown.d27620e1.svg";function z(t){const e=document.createElement("div");e.className="speen";const n=document.createElement("img");n.src=ie,e.appendChild(n),t.appendChild(e)}async function Ne(t,e,n){let a=null;const s=`page:${t}`,r=document.createElement("div");if(r.className="wrapper",n)try{const i=await U.get(s);if(i){const c=t in S?S[t]:S.$DEFAULT;i.version===c?(console.log(`${t}: found cached entry`),a=i.value):console.log(`${t}: found outdated cache entry`)}}catch(i){console.log(`${t}: failed to retrieve cache entry:`,i)}if(a)r.innerHTML=a,Ce();else{console.log(`${t}: fetching`);let i=0;for(;i<5;)try{a=await oe(t);break}catch{i+=1,await le(1e3)}a=a.replace(/"\/wiki/gi,'"//tgproxy.ovo.ovh/wiki'),await A(),r.innerHTML=a,console.log(`${t}: processing`),xe(r,t);const c=t in S?S[t]:S.$DEFAULT;U.set(s,r.innerHTML,c).then(()=>{console.log(`${t}: saved to cache`)})}return e.innerHTML=r.outerHTML,Q(e,t),e.classList.remove("waiting"),e}class q{constructor(e,n,a){this.sections={},this.sectionMap={},this.loading=!1,this.cacheEnabled=!0,this.sectionListContainer=e,this.tabListContainer=n,this.tabContentContainer=a,q.instance=this}setLoading(e){if(e)document.getElementById("app").classList.add("waiting"),z(this.tabContentContainer),this.tabContentContainer.querySelector(".speen").appendChild(document.createTextNode("Loading wiki pages"));else{document.getElementById("app").classList.remove("waiting");const n=this.tabContentContainer.querySelector(".speen");this.tabContentContainer.removeChild(n)}}createSection(e){const n=document.createElement("div");n.className="section",n.dataset.section=e,n.appendChild(document.createTextNode(e)),n.addEventListener("click",()=>{n.classList.contains("active")||this.showSection(e)}),this.sectionListContainer.appendChild(n),this.sections[e]={name:e,element:n,tabs:{}}}showSection(e){const n=this.sectionListContainer.querySelector(".active");n&&(n.classList.remove("active"),this.tabListContainer.querySelectorAll(`div[data-section=${n.dataset.section}]`).forEach(a=>a.classList.add("hidden"))),this.sections[e].element.classList.add("active"),this.tabListContainer.querySelectorAll(`div[data-section=${e}]`).forEach(a=>a.classList.remove("hidden"))}async openTab(e,n,a){const{icon:s,active:r,text:i}=a,c=document.createElement("div");c.className="tab",c.dataset.section=e,c.dataset.tab=n,c.addEventListener("click",()=>{c.classList.contains("active")||this.setActive(n)});const d=document.createElement("img");d.src=s||Y,c.title=n.replace(/_/gi," "),c.appendChild(d);const l=i||n.substr(n.lastIndexOf("_")+1,4);c.appendChild(document.createTextNode(l)),this.tabListContainer.appendChild(c);const o=document.createElement("div");o.className="page waiting",o.dataset.tab=n,z(o),this.tabContentContainer.appendChild(o),this.sections[e].tabs[n]={tabListItem:c,tabContentItem:o},this.sectionMap[n]=e,this.sections[e].element.classList.contains("active")||c.classList.add("hidden");const f=await Ne(n,o,this.cacheEnabled);f!==o&&(this.sections[e].tabs[n].tabContentItem=f),r&&this.setActive(n)}setActive(e){const n=this.sectionMap[e];if(!(n in this.sections))throw new Error("section not found");if(!(e in this.sections[n].tabs))throw new Error("tab not found");this.tabListContainer.querySelectorAll(".active").forEach(i=>i.classList.remove("active")),this.tabContentContainer.querySelectorAll(".active").forEach(i=>i.classList.remove("active")),this.sections[n].element.classList.contains("active")||this.showSection(n);const{tabListItem:s,tabContentItem:r}=this.sections[n].tabs[e];this.sections[n].element.classList.add("active"),s.classList.add("active"),r.classList.add("active")}}var Ie="./assets/chemistry.7abf1a2a.svg",Be="./assets/medicine.9d3f841c.svg",Ge="./assets/plumbing.5b589422.svg",Re="./assets/grenade.daa08c76.svg",De="./assets/genetics.98c194dd.svg",Pe="./assets/virus.872bd377.svg",We="./assets/surgery.1a9a1a8a.svg",je="./assets/trauma.5439c4dd.svg",Oe="./assets/wound.81b70232.svg",Ve="./assets/ghetto.d89b4222.svg",Ue="./assets/construction.19c2565f.svg",ze="./assets/machines.e34c096e.svg",Fe="./assets/power.37f2b65c.svg",Ke="./assets/solar.2cfa47c6.svg",Xe="./assets/supermatter.9f86c41a.svg",Ze="./assets/turbine.f52e7639.svg",Je="./assets/atmos.b37baa66.svg",Qe="./assets/tcomm.7c30df6c.svg",Ye="./assets/rnd.1ece438e.svg",et="./assets/toxins.f91862ec.svg",tt="./assets/xeno.754aabd2.svg",nt="./assets/rules.5c930ea0.svg",st="./assets/aimod.95716c64.svg",at="./assets/critter.1500f570.svg",rt="./assets/races.91c190bf.svg",it="./assets/food.e92bc0f6.svg",ct="./assets/hydro.04d03df3.svg",ot="./assets/song.74f6973d.svg",lt="./assets/crate.3056f203.svg",dt="./assets/space.6906847c.svg",ut="./assets/auxbase.f179bd7c.svg",ft="./assets/robo.5d91dc4c.svg",pt="./assets/security.f6d2d4b2.svg",mt="./assets/law.2699c5e3.svg",ht="./assets/sop.44ec543e.svg",gt="./assets/trial.1b0d35d8.svg",bt="./assets/traitor.216b4872.svg",vt="./assets/hacking.876c034b.svg",yt="./assets/weapons.4f0c9e0f.svg",kt="./assets/uplink.67f2dd98.svg",Et="./assets/rev.7bb075cb.svg",_t="./assets/cult.401ec22e.svg",Lt="./assets/nuke.9c73049c.svg",St="./assets/malf.0cf85ba9.svg",Tt="./assets/combat.78ea4d23.svg",xt="./assets/access.b8ff5a08.svg",Ct="./assets/xmorph.cbeceba5.svg",wt="./assets/abduction.afb0b54f.svg",F="./assets/mafia.5836a9ea.svg",Mt="./assets/cyto.04896182.svg",At="./assets/circuit.be2d3059.svg",qt="./assets/tourist.39414369.svg",Ht="./assets/drink.1df9a595.svg";const K=[{name:"Medical",tabs:[{page:"Guide_to_medicine",icon:Be},{page:"Guide_to_chemistry",icon:Ie},{page:"Guide_to_plumbing",icon:Ge},{page:"Grenade",text:"nade",icon:Re},{page:"Infections",text:"virus",icon:Pe},{page:"Surgery",icon:We},{page:"Guide_to_Traumas",text:"trauma",icon:je},{page:"Guide_to_Wounds",text:"wound",icon:Oe},{page:"Guide_to_Ghetto_Chemistry",text:"ghetto",icon:Ve}]},{name:"Engineering",tabs:[{page:"Guide_to_construction",icon:Ue},{page:"Machines",icon:ze},{page:"Guide_to_power",text:"power",icon:Fe},{page:"Solars",text:"solar",icon:Ke},{page:"Guide_to_the_Supermatter",text:"smatt",icon:Xe},{page:"Guide_to_disposals",text:"DISP",icon:null},{page:"Gas_turbine",text:"TURB",icon:Ze},{page:"Guide_to_Atmospherics",text:"atmos",icon:Je},{page:"Guide_to_Telecommunications",icon:Qe,text:"tcomm"}]},{name:"Science",tabs:[{page:"Guide_to_Research_and_Development",text:"R&D",icon:Ye},{page:"Guide_to_robotics",icon:ft},{page:"Guide_to_toxins",text:"toxin",icon:et},{page:"Guide_to_xenobiology",text:"XBIO",icon:tt},{page:"Guide_to_genetics",icon:De},{page:"Guide_to_cytology",text:"cyto",icon:Mt},{page:"Guide_to_Circuits",text:"circ",icon:At}]},{name:"Service",tabs:[{page:"Guide_to_food",text:"food",icon:it},{page:"Guide_to_drinks",text:"drnk",icon:Ht},{page:"Guide_to_Restaurant",text:"TOUR",icon:qt},{page:"Guide_to_hydroponics",icon:ct},{page:"Supply_crates",icon:lt},{page:"Auxiliary_Base_Construction_Area",text:"aux",icon:ut}]},{name:"Security",tabs:[{page:"Guide_to_security",text:"security",icon:pt},{page:"Space_Law",text:"space law",icon:mt},{page:"Standard_Operating_Procedure",text:"S.O.P.",icon:ht},{page:"Guide_to_trials",text:"trials",icon:gt},{page:"Guide_to_Combat",icon:Tt}]},{name:"Antag",tabs:[{page:"Traitor",icon:bt},{page:"Makeshift_weapons",icon:yt},{page:"Syndicate_Items",text:"uplk",icon:kt},{page:"Illicit_Access",icon:xt},{page:"Revolutionary",text:"rev",icon:Et},{page:"Blood_Cult",text:"cult",icon:_t},{page:"Nuclear_Operative",text:"nuke",icon:Lt},{page:"Guide_to_malfunction",icon:St},{page:"Xenos",text:"XENO",icon:Ct},{page:"Abductor",icon:wt},{page:"Families",icon:F},{page:"Heretic",icon:null}]},{name:"Other",tabs:[{page:"Rules",text:"rules",icon:nt},{page:"AI_modules",text:"aimo",icon:st},{page:"Hacking",icon:vt},{page:"Critters",icon:at},{page:"Guide_to_races",icon:rt},{page:"Paper_Markdown",text:"PAPER",icon:null},{page:"Songs",icon:ot},{page:"Guide_to_Space_Exploration",icon:dt},{page:"Mafia",text:"mfia",icon:F}]}];async function $t(){const t=document.getElementById("section-list"),e=document.getElementById("tab-list"),n=document.getElementById("tabs"),a=new q(t,e,n);a.setLoading(!0),await A();const s=document.querySelector("#tabs > .speen"),r=document.createElement("div");r.className="loading-icons";let i=[];K.forEach(d=>d.tabs.forEach(l=>{const o=document.createElement("img");o.dataset.tab=l.page,o.src=l.icon||Y,o.title=l.page.replace(/_/gi," "),r.appendChild(o)})),s.appendChild(r),i=K.flatMap(d=>(a.createSection(d.name),d.tabs.map(async l=>{await a.openTab(d.name,l.page,{icon:l.icon,text:l.text}),r.removeChild(r.querySelector(`img[data-tab=${l.page}]`))})));const c=document.getElementById("Welcome");Q(c,"$Welcome"),Promise.all(i).then(()=>{a.setLoading(!1),a.showSection("Medical"),c.classList.add("active")})}if("serviceWorker"in navigator){const t={}.VITE_SUBDIR?`${{}.VITE_SUBDIR}/sw.js`:"sw.js";navigator.serviceWorker.register(t).then(e=>{console.log("Registration successful, scope is:",e.scope)}).catch(e=>{console.log("Service worker registration failed, error:",e)})}$t();document.body.appendChild(de());document.getElementById("tgh-version").appendChild(document.createTextNode({}.VITE_APP_REVISION||"unknown"));
