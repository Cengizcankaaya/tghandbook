var Ee=Object.defineProperty,Le=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var ae=(e,t,a)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ne=(e,t)=>{for(var a in t||(t={}))Te.call(t,a)&&ae(e,a,t[a]);if(te)for(var a of te(t))xe.call(t,a)&&ae(e,a,t[a]);return e},se=(e,t)=>Le(e,Se(t));const Ce=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}};Ce();var _e="./assets/speen.d7e67bf9.svg";const we="https://tgproxy.ovo.ovh/wiki";async function Ae(e){const a=`/api.php?action=parse&page=${encodeURIComponent(e)}&prop=text&format=json`;return(await(await fetch(we+a)).json()).parse.text["*"]}const M="_GLOBAL",G="_GENERIC",x={},C={};function T(e,t){x[e]=t}function k(e,t){C[e]=t}function Me(e,t){M in x&&x[M](t,e),e in x?x[e](t,e):G in x&&x[G](t,e)}function re(e,t){M in C&&C[M](t,e),e in C?C[e](t,e):G in C&&C[G](t,e)}function N(e,t){let a=e.parentElement;for(;a!=null&&!t(a);)a=a.parentElement;return a}function L(e){const[t,...a]=Array.from(e.querySelectorAll("tr")),n=Array.from(t.querySelectorAll("th")).map(r=>r.textContent.trim());return a.map(r=>{const o={};return r.querySelectorAll("td,th").forEach((s,i)=>{o[n[i]]=s,o[`$row${i}`]=s}),o})}function y(e,t,a){const n=document.createElement("table");if(t.length<1)return n;const r=document.createElement("tr");return e.forEach(o=>{const s=document.createElement("th");s.appendChild(document.createTextNode(o)),r.appendChild(s)}),n.appendChild(r),t.forEach(o=>{const s=document.createElement("tr");e.forEach((i,l)=>{let c=null;o[i].tagName==="TD"||o[i].tagName==="TH"?c=o[i]:(c=document.createElement("td"),l===0&&c.classList.add("btab-name"),c.appendChild(o[i])),s.appendChild(c)}),a&&a(o,s),n.appendChild(s)}),n}const ie={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var H=(e=>(e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e))(H||{});function pe({h:e,s:t,v:a}){const n=Math.floor(e*6),r=e*6-n,o=a*(1-t),s=a*(1-r*t),i=a*(1-(1-r)*t);switch(n%6){case 0:return{r:a,g:i,b:o};case 1:return{r:s,g:a,b:o};case 2:return{r:o,g:a,b:i};case 3:return{r:o,g:s,b:a};case 4:return{r:i,g:o,b:a};case 5:return{r:a,g:o,b:s};default:throw new Error("unreacheable")}}function be({r:e,g:t,b:a}){const n=Math.max(e,t,a),r=Math.min(e,t,a),o=n,s=n-r,i=n===0?0:s/n;let l;if(n===r)l=0;else{switch(n){case e:l=(t-a)/s+(t<a?6:0);break;case t:l=(a-e)/s+2;break;case a:l=(e-t)/s+4;break;default:throw new Error("unreacheable")}l/=6}return{h:l,s:i,v:o}}function He(e){if(ie[e])return R(ie[e]);const t=document.createElement("div");t.style.color=e,document.body.appendChild(t);const n=window.getComputedStyle(t).getPropertyValue("color");return document.body.removeChild(t),R(n)}function R(e){if(e[0]==="#"){const t=(e.length-1)/3,a=[17,1,.062272][t-1];return{r:Math.round(parseInt(e.substr(1,t),16)*a)/256,g:Math.round(parseInt(e.substr(1+t,t),16)*a)/256,b:Math.round(parseInt(e.substr(1+2*t,t),16)*a)/256}}if(e.startsWith("rgb")){const t=e.split("(")[1].split(")")[0].split(",").map(a=>parseInt(a,10)).map(Math.round);return{r:t[0]/256,g:t[1]/256,b:t[2]/256}}return He(e)}function ge(e,t){const a=Math.round(e.r*255),n=Math.round(e.g*255),r=Math.round(e.b*255);switch(t){case 0:return`rgb(${a}, ${n}, ${r})`;case 1:{const o=`00${a.toString(16)}`.slice(-2),s=`00${n.toString(16)}`.slice(-2),i=`00${r.toString(16)}`.slice(-2);return`#${o}${s}${i}`}default:return"#000"}}function W(e,t){const a=R(e),n=be(a);n.s<.15?(n.h=.6,n.s=.5,n.v=Math.max(.2,1-n.v)):n.v>.5&&(n.v=.4,n.s>.2&&(n.s=Math.min(1,n.s+.2)));const r=pe(n);return ge(r,t)}function $e(e,t){const a=R(e),n=be(a);n.v<.5&&(n.v=.8),n.s>.7&&(n.s=Math.min(1,n.s-.3),n.v=1),Math.abs(n.h-.666)<.1&&(n.h-=.13,n.v=Math.min(1,n.v+.1));const r=pe(n);return ge(r,t)}function P(){return new Promise(e=>{requestAnimationFrame(()=>e())})}function qe(e){return new Promise(t=>{setTimeout(()=>t(),e)})}function Ne(e,t){return e.startsWith(t)?e.slice(t.length):e}function A(...e){const t=e[0],a=e[1],n=document.createElement(t);let r=1;typeof a=="object"&&a!==null&&!Array.isArray(a)&&(Object.keys(a).forEach(o=>{o.startsWith("@")?n.addEventListener(o.substr(1),a[o]):n[o]=a[o]}),r=2);for(let o=r;o<e.length;o+=1)Array.isArray(e[o])?n.appendChild(A.apply(this,e[o])):e[o]instanceof Node?n.appendChild(e[o]):n.appendChild(document.createTextNode(e[o]));return n}const oe=A;function ce(e,t){const a={};return e.forEach(n=>{const r=t(n);r in a?a[r].push(n):a[r]=[n]}),a}window.addEventListener("popstate",e=>{var t;(t=e.state)!=null&&t.page&&ve(e.state.page,e.state.hash)});function Ie(){const{pathname:e,hash:t}=location,a="/tghandbook";let n=e.substring(1+a.length);return n.startsWith("meta/")&&(n=`$${n.substring(5)}`),{path:n,hash:t.substring(1)}}function j(e,t){let a=`/${e}`;e.startsWith("$")&&(e==="$Welcome"?a="/":a=`/meta/${e.substring(1)}`);const n="/tghandbook";history.pushState({page:e,hash:t},"",`${n}${a}${t?`#${t}`:""}`)}const D=[];function S(e){D.push(...e)}function Be(e,t){return D.find(a=>a.page===e&&a.name===t)}function I(e,t){var a;t&&((a=document.querySelector(".page.active"))==null?void 0:a.dataset.tab)!==e.page&&q.instance.setActive(e.page),e.element.scrollIntoView({block:e.alignment,inline:"nearest",behavior:"auto"}),document.querySelectorAll(".bgus_fz_selected").forEach(n=>n.classList.remove("bgus_fz_selected")),e.element.classList.add("bgus_fz_selected")}function ve(e,t){if(!e)return!1;if(q.instance.setActive(e),t){const a=Be(e,t);a&&I(a,!1)}return!0}function Ge(){const e=document.createElement("ul"),t=document.createElement("div");let a=[],n=0,r=!1;const o=c=>{n=c,e.querySelectorAll(".selected").forEach(d=>d.classList.remove("selected")),e.children[c].classList.add("selected"),I(a[c],r)},s=async(c,d)=>{if(!c||c.length<1)return;let h=D;if(r=c[0]==="@",r?c=c.substr(1):h=D.filter(m=>m.page===d),c.length<1)return;const p=c.split("").map(m=>["\\","]","^"].includes(m)?`\\${m}`:m).join("])(.*?)(["),g=new RegExp(`^(.*?)([${p}])(.*?)$`,"i");a=h.map(m=>se(ne({},m),{matches:(m.name.match(g)||[]).slice(1).reduce((f,u,b,v)=>(b<2?f.push([u]):v[b-1]===""?f[f.length-1].push(u):u!==""&&f.push([u]),f),[]).map(f=>f.join(""))})).filter(m=>m.matches.length>0).sort((m,f)=>{const u=m.id,b=m.matches,v=f.id,E=f.matches;if(b.length===1&&E.length!==1)return-1;if(b.length!==1&&E.length===1)return 1;const J=_=>!/[^a-zA-Z0-9]*$/.test(_),Q=b.filter(J).length-E.filter(J).length;if(Q!==0)return Q;for(let _=0;_<Math.min(b.length,E.length)-1;_+=2){const ee=b[_].length-E[_].length;if(ee!==0)return ee}const Y=b.length-E.length;return Y!==0?Y:u-v}),await P(),e.innerHTML="",a.forEach(m=>{const f=document.createElement("li");if(m.matches.forEach((u,b)=>{const v=document.createElement(b%2?"strong":"span");v.appendChild(document.createTextNode(u)),f.appendChild(v)}),r){const u=document.createElement("span");u.className="source",u.appendChild(document.createTextNode(m.page.replace(/_/g," "))),f.appendChild(u)}f.addEventListener("click",()=>{I(m,r),j(m.page,m.name),t.classList.add("bgus_hidden")}),e.appendChild(f)}),a.length>0&&o(0)},i=document.createElement("input");let l="";return i.addEventListener("keyup",c=>{switch(c.code){case"Escape":t.classList.add("bgus_hidden");return;case"Enter":if(a.length>0){const d=a[n];I(d,r),j(d.page,d.name)}t.classList.add("bgus_hidden");return;case"ArrowDown":n<a.length-1&&o(n+1);return;case"ArrowUp":n>0&&o(n-1);return;default:if(i.value!==l){const d=document.querySelector(".page.active");s(i.value,d.dataset.tab),l=i.value}}}),document.body.addEventListener("keyup",c=>{c.code==="KeyS"&&i.focus()}),document.body.addEventListener("keydown",c=>{if(c.shiftKey)switch(c.code){case"KeyS":{t.classList.remove("bgus_hidden"),i.value="";break}}}),t.id="bgus_fz_searchbox",t.classList.add("bgus_hidden"),t.appendChild(i),t.appendChild(e),t}function Re(e){return e==="H1"||e==="H2"||e==="H3"}T(M,function(e,t){var o;const a=document.createElement("h1");a.className="pageheader",a.appendChild(document.createTextNode(t.replace(/_/g," "))),e.insertBefore(a,e.firstChild),e.querySelectorAll("img").forEach(s=>s.setAttribute("loading","lazy")),e.querySelectorAll(".mw-editsection").forEach(s=>{s.parentElement.removeChild(s)}),e.querySelectorAll("a").forEach(s=>{s.href.includes(t)||(s.target="_blank")}),e.querySelectorAll("*[bgcolor]").forEach(s=>{let i=s.getAttribute("bgcolor");i.length===6&&!Number.isNaN(parseInt(i,16))&&(i=`#${i}`),s.setAttribute("bgcolor",W(i,H.HEX).slice(1))}),e.querySelectorAll("*[style]").forEach(s=>{s.style.backgroundColor!==""&&(s.style.backgroundColor=W(s.style.backgroundColor,H.RGB)),s.style.background!==""&&(s.style.backgroundColor=W(s.style.background,H.RGB))}),e.querySelectorAll("*[color]").forEach(s=>{let i=s.getAttribute("color");i.length===6&&!Number.isNaN(parseInt(i,16))&&(i=`#${i}`),s.setAttribute("color",$e(i,H.HEX).slice(1))}),e.querySelectorAll("table[width]").forEach(s=>{s.setAttribute("width","100%")}),e.querySelectorAll("table[style]").forEach(s=>{s.style.width!==""&&(s.style.width="100%")}),e.querySelectorAll("table .floatright > a > img").forEach(s=>{const i=N(s,c=>c instanceof HTMLTableRowElement),l=document.createElement("td");i.appendChild(l)});const n=e.querySelector("#toc");if(n){const s=n.querySelector("h2");n.parentNode.insertBefore(s,n);const i=n.querySelector("#toctitle");i!=null&&n.removeChild(i)}e.querySelectorAll("h1,h2,h3").forEach(s=>{const i=s.parentNode,l=document.createElement("div");for(i.insertBefore(l,s);s.nextSibling&&!Re(s.nextSibling.nodeName);){const c=s.nextSibling;i.removeChild(c),l.appendChild(c)}s.parentNode.removeChild(s),l.insertBefore(s,l.firstChild),l.className="mw-headline-cont"}),e.querySelectorAll("h1 .mw-headline, h2 .mw-headline, h3 .mw-headline").forEach(s=>{const i=N(s,l=>l.classList.contains("mw-headline-cont"));i&&i.querySelectorAll("h1 .mw-headline, h2 .mw-headline, h3 .mw-headline").length===1?(i.id=s.id,s.id+="-span",i.dataset.name=s.textContent):(s.dataset.name=s.textContent,s.classList.add("mw-headline-cont"))});const r=e.querySelector(".tabs-tabbox a[title='Labor Camp']");r&&((o=N(r,s=>s.classList.contains("tabs-tabbox")))==null||o.remove())});k(M,(e,t)=>{const a=Array.from(e.querySelectorAll(".mw-headline-cont[id][data-name]"));S(a.map((n,r)=>({id:r,page:t,name:n.dataset.name.trim(),element:n,alignment:"start"})))});const V="Guide_to_chemistry";T(V,e=>{e.querySelectorAll("table.wikitable > tbody > tr:not(:first-child) > td:nth-child(2), .tooltiptext").forEach(t=>{const a=t.cloneNode();Array.from(t.childNodes).forEach(n=>{n instanceof HTMLParagraphElement?a.append(...n.childNodes):a.append(n)}),t.parentNode.replaceChild(a,t)}),Array.from(e.querySelectorAll("td")).filter(t=>t.textContent.indexOf(" part")>=0).forEach(t=>{t.innerHTML=t.innerHTML.replace(/((\d+)\s+(?:parts?|units?))(.*?(?:<\/a>|\n|$))/gi,(a,...[n,r,o])=>`<label class="bgus_part ${o.includes("</a>")?"bgus_part_tooltip":""}" data-amount="${r}"><input type="checkbox" class='bgus_checkbox bgus_hidden'/> <span class="bgus_part_label" data-src="${n}">${n}</span></label>${o.replace(/(<a .+?<\/a>)/gi,'<span class="bgus_nobreak bgus_nested_element">$1<span class="bgus_twistie"></span></span>')}`)}),e.querySelectorAll(".bgus_part").forEach(t=>{"parts"in t.parentElement.dataset?t.parentElement.dataset.parts=(parseInt(t.parentElement.dataset.parts,10)+parseInt(t.dataset.amount,10)).toString():t.parentElement.dataset.parts=t.dataset.amount}),e.querySelectorAll("div[data-name] .wikitable.sortable tr").forEach(t=>{const n=N(t,b=>"name"in b.dataset&&b.dataset.name!=="").dataset.name;if(t.querySelector("td")===null){t.querySelectorAll("th").forEach((v,E)=>{if(E<2){v.classList.add("table-head");return}v.parentElement.removeChild(v)});return}const r=Array.from(t.querySelectorAll("td")).slice(1);let o=null,s=null,i=null,l=null,c=null,d=null,h=null,p=null;switch(n){case"Components":[i,c]=r;break;case"Virology Recipes":[c]=r;break;case"Narcotics":[i,c,d,h,p]=r;break;case"Other Reagents":[i,c,d]=r;break;case"Explosive Strength":[o,c,s]=r;break;case"Mutation Toxins":[c,d]=r;break;default:[i,l,c,d,h,p]=r}const g=t.querySelector("th"),m=g.querySelector("p"),f=m==null?void 0:m.innerHTML;m&&g.removeChild(m);let u=`<div class="reagent-header btab-name">${g.innerHTML}</div>`;f&&(u+=`<p class="ph-data">${Ne(f,"<br>")}</p>`),l&&(u+=`<p class="treatment">${l.innerHTML}</p>`),d&&(u+=`<p class="metabolism">${d.innerHTML}</p>`),o&&(u+=`<p class="conditions">${o.innerHTML}</p>`),s&&(u+=`<p class="explosive">${s.innerHTML}</p>`),p&&p.innerHTML.trim()!=="N/A"&&(u+=`<p class="addiction">${p.innerHTML}</p>`),h&&h.innerHTML.trim()!=="N/A"&&(u+=`<p class="overdose">${h.innerHTML}</p>`),c&&(u+=`<p>${c.innerHTML}</p>`),i&&(u+=`<div class="ph">${i.innerHTML}</div>`),g.classList.add("reagent-ext"),g.innerHTML=u,c&&c.parentElement.removeChild(c),l&&l.parentElement.removeChild(l),d&&d.parentElement.removeChild(d),o&&o.parentElement.removeChild(o),s&&s.parentElement.removeChild(s),h&&h.parentElement.removeChild(h),p&&p.parentElement.removeChild(p),i&&i.parentElement.removeChild(i)}),e.querySelectorAll(".wikitable.sortable").forEach(t=>{t.classList.add("tgh-btab")})});k(V,e=>{e.querySelectorAll(".bgus_part_tooltip > .bgus_checkbox").forEach(r=>{const o=r.parentElement.nextElementSibling;r.addEventListener("click",()=>{o.querySelectorAll(".bgus_checkbox").forEach(s=>{s.checked=r.checked})})}),e.querySelectorAll(".bgus_nested_element").forEach(r=>{r.addEventListener("click",()=>{r.classList.toggle("bgus_collapsed")})});const t=(r,o)=>{r.forEach(s=>{const i=s.parentElement.dataset.amount,l=s.parentElement.parentElement.dataset.parts,c=Math.ceil(o*(i/l));s.innerHTML=`${c} ml`;let d=s.parentElement.nextElementSibling;for(;d;){if(d.classList.contains("tooltip")){const h=[];d.querySelector(".tooltiptext").childNodes.forEach(p=>{p.classList&&p.classList.contains("bgus_part")&&h.push(p.querySelector(".bgus_part_label"))}),t(h,c)}if(d.classList.contains("bgus_part"))break;d=d.nextElementSibling}})},a=Array.from(e.querySelectorAll("table.wikitable > tbody > tr:not(:first-child)"));S(Array.from(e.querySelectorAll("table.wikitable > tbody > tr:not(:first-child) th .reagent-header")).map((r,o)=>({page:V,name:r.textContent.trim().replace(/\n.+$/gm,"").replace("\u25AE",""),element:r.parentElement,alignment:"center",id:o}))),document.body.addEventListener("keydown",r=>{if(r.shiftKey)switch(r.code){case"KeyC":{e.classList.toggle("bgus_cbox"),e.querySelectorAll(".bgus_checkbox:checked").forEach(o=>{o.checked=!1});break}case"KeyB":{const o=parseInt(prompt("Write target ml (0 to reset)","90"),10);if(Number.isNaN(o)||o<=0){e.querySelectorAll(".bgus_part_label").forEach(s=>{s.innerHTML=s.dataset.src});return}t(e.querySelectorAll("td > .bgus_part > .bgus_part_label"),+o);break}}});const n=/<b>(.+):<\/b>(.+)/i;a.forEach(r=>{r.querySelectorAll(".ph").forEach(o=>{const s=[],i=document.createElement("table"),l=document.createElement("tr"),c=document.createElement("tr");i.appendChild(l),i.appendChild(c),o.innerHTML.split("<br>").forEach(d=>{if(d.trim()==="N/A")return;const h=n.exec(d);if(!h){s.push(d);return}const[p,g]=h.slice(1).map(u=>u.trim()),m=document.createElement("th");m.appendChild(document.createTextNode(p)),l.appendChild(m);const f=document.createElement("td");f.appendChild(document.createTextNode(g)),c.append(f)}),o.innerHTML="",l.children.length>0&&o.appendChild(i),o.innerHTML+=`<p>${s.join("<br>")}</p>`,o.classList.add("ph-ext")})})});const B="Infections";T(B,e=>{const t=e.querySelector("#Simple_Diseases .wikitable"),a=L(t).map(i=>{const l=document.createElement("td");return l.innerHTML=`
    <div class="disease-name btab-name">${i["Disease Name"].innerHTML}</div>
    <p class="vector">${i["Vector Name"].innerHTML}</p>
    <p class="source">${i.Source.innerHTML}</p>
    <p class="spread">${i.Spread.innerHTML}</p>
    <p class="description">${i.Description.innerHTML}</p>
    `,{Disease:l,Cure:i.Cure}}),n=y(["Disease","Cure"],a);n.className="disease-ext tgh-btab wikitable",t.replaceWith(n);const r=e.querySelector("#Symptoms_Table .wikitable"),o=L(r).sort((i,l)=>parseInt(i.Level.textContent,10)-parseInt(l.Level.textContent,10)).map(i=>{const l=document.createElement("td");l.innerHTML=`
    <div class="disease-name btab-name">${i.Symptom.innerHTML}</div>
    <p class="level">${i.Level.innerHTML}</p>
    <p class="chemical">${i["Required Chemical"].innerHTML}</p>
    <p class="description">${i.Effect.innerHTML}</p>
    `;const c=document.createElement("td");c.innerHTML=`
    <table class="stats">
      <tr><th>Stealth</th><td>${i.Stealth.innerHTML}</td></tr>
      <tr><th>Resistance</th><td>${i.Resistance.innerHTML}</td></tr>
      <tr><th>Stage speed</th><td>${i["Stage speed"].innerHTML}</td></tr>
      <tr><th>Transmission</th><td>${i.Transmission.innerHTML}</td></tr>
    </table>
    `;const d=i["Threshold (hover mouse over for details)"];return d.innerHTML=`<ul class="thresholds"><li>${d.innerHTML.split(",").join("</li><li>")}</li></ul>`,{Symptom:l,Stats:c,Thresholds:d}}),s=y(["Symptom","Stats","Thresholds"],o);s.className="symptoms-ext tgh-btab wikitable",r.replaceWith(s)});k(B,e=>{const t=Array.from(e.querySelectorAll(".disease-ext tr:not(:first-child)"));S(t.map((n,r)=>({page:B,name:n.querySelector(".disease-name").textContent.trim(),element:n,alignment:"center",id:r})));const a=Array.from(e.querySelectorAll(".symptoms-ext > tbody > tr:not(:first-child)"));S(a.map((n,r)=>({page:B,name:n.querySelector(".disease-name").textContent.trim(),element:n,alignment:"center",id:r})))});const z="Guide_to_food";T(z,e=>{const t=[],a=[];e.querySelectorAll(".wikitable").forEach(c=>{const d=c.querySelector("tr");!d.innerHTML.includes("Picture")||(d.childElementCount===3&&t.push(c),d.childElementCount>3&&a.push(c))}),t.forEach(c=>{const d=c.querySelector("tr").querySelectorAll("th,td"),h=d[1].innerText.trim(),p=d[2].innerText.trim(),g=[];c.querySelectorAll("tr:not(:first-child)").forEach(f=>{const u=f.querySelectorAll("th,td"),b=document.createElement("td");b.innerHTML=`<div class="food-block">
<div class="food-pic btab-pic">${u[0].innerHTML}</div>
<div class="food-name btab-name">${u[1].innerHTML}</div>
</div>
`,g.push({[h]:b,[p]:u[2]})});const m=y([h,p],g);m.className="food-base-ext tgh-btab wikitable",c.replaceWith(m)});const n=e.querySelector("#Recipe_Books .wikitable"),r=L(n).map(c=>{const d=document.createElement("td");return d.innerHTML=`<div class="food-pic btab-pic">${c.Picture.innerHTML}</div>
<div class="food-name btab-name">${c.Book.innerHTML}</div>
<p class="unlocks">${c.Unlocks.innerHTML}</p>
<p class="notes">${c.Notes.innerHTML}</p>
`,{Book:d,"Where to get":c["Where to get"]}}),o=y(["Book","Where to get"],r);o.className="book-ext wikitable",n.replaceWith(o),a.forEach(c=>{const d=c.querySelector("tr").querySelectorAll("td,th"),h=d[0].innerText.trim(),p=d[1].innerText.trim(),g=d[2].innerText.trim(),m=L(c).map(u=>{const b=document.createElement("td");b.innerHTML=`
<div class="food-pic btab-pic">${u[h].innerHTML}</div>
<div class="food-name btab-name">${u[p].innerHTML}</div>
${"Nutritional Value"in u?`<p class="nutrition">${u["Nutritional Value"].innerHTML}</p>`:""}
${"Notes"in u?`<p class="notes">${u.Notes.innerHTML}</p>`:""}
`;const v=u[g].innerHTML.split(/,|\+/gi).map(E=>`<p>${E.trim()}</p>`);return u[g].innerHTML=v.join(""),{Food:b,Ingredients:u[g]}}),f=y(["Food","Ingredients"],m);f.className="recipe-ext tgh-btab wikitable",c.replaceWith(f)});const s=e.querySelector("#Custom_Recipes .wikitable"),i=L(s).map(c=>(c["Custom food"].innerHTML=`<div class="food-name">${c["Custom food"].innerHTML}</div>`,c)),l=y(Object.keys(i[0]),i);l.className="food-base-ext tgh-btab wikitable",s.replaceWith(l)});k(z,e=>{e.querySelectorAll(".bgus_nested_element").forEach(a=>{a.addEventListener("click",()=>{a.classList.toggle("bgus_collapsed")})});const t=Array.from(e.querySelectorAll(".drink-ext tr:not(:first-child), .food-base-ext tr:not(:first-child), .food-ext tr:not(:first-child), .recipe-ext tr:not(:first-child)"));S(t.map((a,n)=>({page:z,name:a.querySelector(".food-name").textContent.trim(),element:a,alignment:"center",id:n})))});const F="Guide_to_drinks";T(F,e=>{const t=[],a=[];e.querySelectorAll(".wikitable").forEach(n=>{const r=n.querySelector("tr");if(!!r.innerHTML.includes("Picture")){if(r.childElementCount===3){a.push(n);return}t.push(n)}}),t.forEach(n=>{const r=L(n).map(s=>{const i=document.createElement("td");i.innerHTML=`
<div class="food-pic btab-pic">${s.Picture.innerHTML}</div>
<div class="food-name btab-name">${s.Cocktail.innerHTML}</div>
<p class="strength">${s.Strength.innerHTML}</p>
<p class="description">${s["Drink Description"].innerHTML}</p>
${"Notes"in s?`<p class="notes">${s.Notes.innerHTML}</p>`:""}
`;const l=s.Ingredients.innerHTML.split(/,|\+/gi).map(c=>`<p>${c.trim()}</p>`);return s.Ingredients.innerHTML=l.join(""),{Drink:i,Ingredients:s.Ingredients}}),o=y(["Drink","Ingredients"],r);o.className="drink-ext tgh-btab wikitable",n.replaceWith(o)}),a.forEach(n=>{const r=L(n).map(s=>{const i=document.createElement("td");return i.innerHTML=`<div class="food-pic btab-pic">${s.Picture.innerHTML}</div>
      <div class="food-name btab-name">${s.Dispenses.innerHTML}</div>`,{Dispenses:i,Description:s.Description}}),o=y(["Dispenses","Description"],r);o.className="junk-ext tgh-btab wikitable",n.replaceWith(o)})});k(F,e=>{const t=Array.from(e.querySelectorAll(".drink-ext tr:not(:first-child), .food-base-ext tr:not(:first-child), .food-ext tr:not(:first-child), .junk-ext tr:not(:first-child)"));S(t.map((a,n)=>({page:F,name:a.querySelector(".food-name").textContent.trim(),element:a,alignment:"center",id:n})))});const U="Guide_to_Ghetto_Chemistry";T(U,e=>{const t=e.querySelector("#Grindables .wikitable"),a=L(t).map(r=>{var s,i;const o=document.createElement("td");return o.innerHTML=`
    <div class="grindable-name btab-name">${r.Chemical.innerHTML}</div>
    <p class="notes">${(i=(s=r.Notes)==null?void 0:s.innerHTML)!=null?i:""}</p>
    `,{Chemical:o,Sources:r.Sources}}),n=y(["Chemical","Sources"],a);n.className="grindable-ext tgh-btab wikitable",t.replaceWith(n)});k(U,e=>{const t=Array.from(e.querySelectorAll(".grindable-ext tr:not(:first-child)"));S(t.map((a,n)=>({page:U,name:a.querySelector(".grindable-name").textContent.trim(),element:a,alignment:"center",id:n})))});const Z="Mafia";T(Z,e=>{const t=e.querySelectorAll(".wikitable");Array.from(t).filter(a=>{var n,r;return(r=(n=a.querySelector("th"))==null?void 0:n.textContent)==null?void 0:r.includes("Role")}).forEach(a=>{const n=L(a).map(o=>{const s=document.createElement("td");return s.innerHTML=`
	  <div class="role-name btab-name">${o.Role.innerHTML}</div>
	  <p class="description">${o.Description.innerHTML}</p>
	  `,{Role:s,"How to play":o["How to Play"]}}),r=y(["Role","How to play"],n);r.className="role-ext tgh-btab wikitable",a.replaceWith(r)})});k(Z,e=>{const t=Array.from(e.querySelectorAll(".role-ext > tbody > tr:not(:first-child)"));S(t.map((a,n)=>({page:Z,name:a.querySelector(".role-name").textContent.trim(),element:a,alignment:"center",id:n})))});const K="Critters";T(K,e=>{const t=e.querySelectorAll(".wikitable");Array.from(t).filter(a=>{var n,r;return(r=(n=a.querySelector("th:nth-child(2)"))==null?void 0:n.textContent)==null?void 0:r.includes("Name")}).forEach(a=>{const n=L(a).map(o=>{const s=document.createElement("td");return s.innerHTML=`
	<div class="critter-pic btab-pic">${o.$row0.innerHTML}</div>
	  <div class="critter-name btab-name">${o.Name.innerHTML}</div>
	  `,{Critter:s,Description:o.Description}}),r=y(["Critter","Description"],n);r.className="critter-ext tgh-btab wikitable",a.replaceWith(r)})});k(K,e=>{const t=Array.from(e.querySelectorAll(".critter-ext > tbody > tr:not(:first-child)"));S(t.map((a,n)=>({page:K,name:a.querySelector(".critter-name").textContent.trim(),element:a,alignment:"center",id:n})))});const X="Guide_to_Restaurant";function le(e){const t=A("div",{className:"tourist-order"});return t.innerHTML=`${e.icon} ${e.name}`,t}T(X,e=>{const t=e.querySelector("#Tourists_and_orders .wikitable"),a=[];let n=null,r=!1;t.querySelectorAll("tr").forEach(s=>{const i=Array.from(s.querySelectorAll("td"));i.length<1||(i[0].rowSpan>1&&i[0].colSpan===1&&(n!=null&&a.push(n),n={name:i[0].textContent.trim(),icons:Array.from(i[0].querySelectorAll("img")),foods:[],drinks:[]},r=!1,i.splice(0,1)),i[0].rowSpan>1&&(r=!0,i.splice(0,1)),!r&&i.length>1&&(n.foods.push({icon:i[0].innerHTML,name:i[1].innerHTML}),i.splice(0,2)),i.length>1&&n.drinks.push({icon:i[0].innerHTML,name:i[1].innerHTML}))}),n!=null&&a.push(n);const o=y(["Customer","Food","Drinks"],a.map(s=>({Customer:A("td",{className:"btab-name"},...s.icons,["span",{className:"tourist-name"},s.name]),Food:A("td",...s.foods.map(le)),Drinks:A("td",...s.drinks.map(le))})));o.className="tourist-ext tgh-btab wikitable",t.replaceWith(o)});k(X,e=>{const t=Array.from(e.querySelectorAll(".tourist-ext > tbody > tr:not(:first-child)"));S(t.map((a,n)=>({page:X,name:a.querySelector(".tourist-name").textContent.trim(),element:a,alignment:"center",id:n})))});function De(e){e.querySelectorAll("div.hidden").forEach(t=>{t.style.display="block",t.style.opacity="1"}),e.querySelector(".action_buttons").style.display="none",e.classList.remove("center")}k("$Welcome",e=>{const t=e.querySelector(".action_buttons");e.querySelectorAll("div[data-name]").forEach(a=>{const{name:n}=a.dataset,r=document.createElement("button");r.className="pretty-button",r.appendChild(document.createTextNode(n)),r.addEventListener("click",async()=>{De(e),await P(),a.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}),t.appendChild(r)})});k("$Changelog",async e=>{const t=[{date:"2022-06-27T00:09:07.000Z",author:{name:"Hamcha",avatar:"https://avatars.githubusercontent.com/u/974661?v=4"},change:"qol: Changelogs now take less space",url:"https://github.com/Hamcha/tghandbook/commit/26f950ce68d588113048d8b0c3a4bc06e35d757d"},{date:"2022-06-27T00:02:53.000Z",author:{name:"Hamcha",avatar:"https://avatars.githubusercontent.com/u/974661?v=4"},change:"add: Tourist table is now better formatted",url:"https://github.com/Hamcha/tghandbook/commit/6df098e283e21e35fc8b15fa17d05352128a7bee"},{date:"2022-06-23T19:00:15.000Z",author:{name:"Hamcha",avatar:"https://avatars.githubusercontent.com/u/974661?v=4"},change:"add: Moving between pages and search results are saved into the browser history for better navigation",url:"https://github.com/Hamcha/tghandbook/commit/a14640dab7514b0d8cfced9cae00d1d058f0da11"},{date:"2022-06-22T15:21:53.000Z",author:{name:"Hamcha",avatar:"https://avatars.githubusercontent.com/u/974661?v=4"},change:"add: New section for tghandbook pages and changelog",url:"https://github.com/Hamcha/tghandbook/commit/4cc27040cda3c71a2de6c03ef4e1409df840f27c"},{date:"2022-06-22T10:40:54.000Z",author:{name:"Hamcha",avatar:"https://avatars.githubusercontent.com/u/974661?v=4"},change:"fix: Removed broken list of locations from the bottom of some pages",url:"https://github.com/Hamcha/tghandbook/commit/99c0933970fe59b261d532216a9f67cd147b2c80"},{date:"2022-06-22T10:23:30.000Z",author:{name:"Hamcha",avatar:"https://avatars.githubusercontent.com/u/974661?v=4"},change:"fix: Tables don't resize wildly when the page gets too wide",url:"https://github.com/Hamcha/tghandbook/commit/ea7c843c063a39deb471400a06087ac04513a3d1"},{date:"2022-06-11T18:44:30.000Z",author:{name:"Hamcha",avatar:"https://avatars.githubusercontent.com/u/974661?v=4"},change:"add: Critters are now better formatted and indexed",url:"https://github.com/Hamcha/tghandbook/commit/e604e0e9bdfe4365c160a760fd6d10ec96b735e9"},{date:"2022-06-11T18:32:23.000Z",author:{name:"Hamcha",avatar:"https://avatars.githubusercontent.com/u/974661?v=4"},change:"add: Mafia roles are now better formatted and indexed",url:"https://github.com/Hamcha/tghandbook/commit/225d8e3848666b49889b8e152af183343be7f4ff"},{date:"2022-06-11T18:14:28.000Z",author:{name:"Hamcha",avatar:"https://avatars.githubusercontent.com/u/974661?v=4"},change:"add: Ghetto chemistry entries are better formatted and indexed",url:"https://github.com/Hamcha/tghandbook/commit/1256e9aba96dc13634430703c1ff8f08eeb3f695"}],a=e.querySelector(".tgh-changes"),n=ce(t,r=>{const o=new Date(r.date).toISOString();return o.substring(0,o.indexOf("T"))});Object.keys(n).sort().reverse().forEach(r=>{const o=oe("h3",{className:"tgh-change-date"},r);a.appendChild(o);const s=ce(n[r],i=>i.author.name);Object.keys(s).forEach(i=>{a.appendChild(oe("article",{className:"tgh-change-entry"},["header",["img",{src:s[i][0].author.avatar}],["div",{className:"author"},s[i][0].author.name]],...s[i].map(l=>{const c=l.change.indexOf(":"),d=l.change.substring(0,c).trim(),h=l.change.substring(c+1).trim();return["div",{className:"tgh-change-info"},["div",{className:`tgh-change-tag tag-${d}`},d],h,["a",{href:l.url,className:"tgh-change-more",title:"Go to commit",target:"_blank"},"\u{1F517}"]]})))})})});const w={Infections:"f7599d8e6598d2eca4aa9869262d0681983a95ec",Guide_to_food:"f7599d8e6598d2eca4aa9869262d0681983a95ec",Guide_to_drinks:"f7599d8e6598d2eca4aa9869262d0681983a95ec",Guide_to_chemistry:"f7599d8e6598d2eca4aa9869262d0681983a95ec",Guide_to_Ghetto_Chemistry:"f7599d8e6598d2eca4aa9869262d0681983a95ec",Mafia:"87d3bd9890395d4c01e435e895ac05aac3515047",Critters:"87d3bd9890395d4c01e435e895ac05aac3515047",Guide_to_Restaurant:"2ac9162d72e2877191892ed4c737c023d5fc2964",$DEFAULT:"f7599d8e6598d2eca4aa9869262d0681983a95ec"},Pe=440;function We(e,t){document.querySelectorAll("img[width]").forEach(a=>{const n=a.getAttribute("width");if(n.includes("%"))return;parseInt(n,10)>Pe&&(a.setAttribute("width","100%"),a.removeAttribute("height"))})}class Oe{constructor(t="tg-cache",a="keyval"){this.storeName=a,this.dbp=new Promise((n,r)=>{const o=indexedDB.open(t,1);o.onerror=()=>r(o.error),o.onsuccess=()=>n(o.result),o.onupgradeneeded=()=>{o.result.createObjectStore(a)}})}withIDBStore(t,a){return this.dbp.then(n=>new Promise((r,o)=>{const s=n.transaction(this.storeName,t);s.oncomplete=()=>r(),s.onabort=()=>o(s.error),s.onerror=()=>o(s.error),a(s.objectStore(this.storeName))}))}}let O;function $(){return O||(O=new Oe),O}function je(e,t=$()){let a;return t.withIDBStore("readonly",n=>{a=n.get(e)}).then(()=>a.result)}function Ve(e,t,a,n=$()){return n.withIDBStore("readwrite",r=>{r.put({version:a,value:t},e)})}function ze(e,t=$()){return t.withIDBStore("readwrite",a=>{a.delete(e)})}function Fe(e=$()){return e.withIDBStore("readwrite",t=>{t.clear()})}function Ue(e=$()){const t=[];return e.withIDBStore("readonly",a=>{(a.openKeyCursor||a.openCursor).call(a).onsuccess=function(){!this.result||(t.push(this.result.key),this.result.continue())}}).then(()=>t)}var de={get:je,set:Ve,keys:Ue,del:ze,clear:Fe},Ze="./assets/chemistry.7abf1a2a.svg",Ke="./assets/medicine.9d3f841c.svg",Xe="./assets/plumbing.5b589422.svg",Je="./assets/grenade.daa08c76.svg",Qe="./assets/genetics.98c194dd.svg",Ye="./assets/virus.872bd377.svg",et="./assets/surgery.1a9a1a8a.svg",tt="./assets/trauma.5439c4dd.svg",at="./assets/wound.81b70232.svg",nt="./assets/ghetto.d89b4222.svg",st="./assets/construction.19c2565f.svg",rt="./assets/machines.e34c096e.svg",it="./assets/power.37f2b65c.svg",ot="./assets/solar.2cfa47c6.svg",ct="./assets/supermatter.9f86c41a.svg",lt="./assets/turbine.f52e7639.svg",dt="./assets/atmos.b37baa66.svg",ut="./assets/tcomm.7c30df6c.svg",mt="./assets/rnd.1ece438e.svg",ht="./assets/toxins.f91862ec.svg",ft="./assets/xeno.754aabd2.svg",pt="./assets/rules.5c930ea0.svg",bt="./assets/aimod.95716c64.svg",gt="./assets/critter.1500f570.svg",vt="./assets/races.91c190bf.svg",yt="./assets/food.e92bc0f6.svg",kt="./assets/hydro.04d03df3.svg",Et="./assets/song.74f6973d.svg",Lt="./assets/crate.3056f203.svg",St="./assets/space.6906847c.svg",Tt="./assets/auxbase.f179bd7c.svg",xt="./assets/robo.5d91dc4c.svg",Ct="./assets/security.f6d2d4b2.svg",_t="./assets/law.2699c5e3.svg",wt="./assets/sop.44ec543e.svg",At="./assets/trial.1b0d35d8.svg",Mt="./assets/traitor.216b4872.svg",Ht="./assets/hacking.876c034b.svg",$t="./assets/weapons.4f0c9e0f.svg",qt="./assets/uplink.67f2dd98.svg",Nt="./assets/rev.7bb075cb.svg",It="./assets/cult.401ec22e.svg",Bt="./assets/nuke.9c73049c.svg",Gt="./assets/malf.0cf85ba9.svg",Rt="./assets/combat.78ea4d23.svg",Dt="./assets/access.b8ff5a08.svg",Pt="./assets/xmorph.cbeceba5.svg",Wt="./assets/abduction.afb0b54f.svg",ue="./assets/mafia.5836a9ea.svg",Ot="./assets/cyto.04896182.svg",jt="./assets/circuit.be2d3059.svg",Vt="./assets/tourist.39414369.svg",zt="./assets/drink.1df9a595.svg";const ye="$META",me=[{name:"Medical",tabs:[{page:"Guide_to_medicine",icon:Ke},{page:"Guide_to_chemistry",icon:Ze},{page:"Guide_to_plumbing",icon:Xe},{page:"Grenade",text:"nade",icon:Je},{page:"Infections",text:"virus",icon:Ye},{page:"Surgery",icon:et},{page:"Guide_to_Traumas",text:"trauma",icon:tt},{page:"Guide_to_Wounds",text:"wound",icon:at},{page:"Guide_to_Ghetto_Chemistry",text:"ghetto",icon:nt}]},{name:"Engineering",tabs:[{page:"Guide_to_construction",icon:st},{page:"Machines",icon:rt},{page:"Guide_to_power",text:"power",icon:it},{page:"Solars",text:"solar",icon:ot},{page:"Guide_to_the_Supermatter",text:"smatt",icon:ct},{page:"Guide_to_disposals",text:"DISP",icon:null},{page:"Gas_turbine",text:"TURB",icon:lt},{page:"Guide_to_Atmospherics",text:"atmos",icon:dt},{page:"Guide_to_Telecommunications",icon:ut,text:"tcomm"}]},{name:"Science",tabs:[{page:"Guide_to_Research_and_Development",text:"R&D",icon:mt},{page:"Guide_to_robotics",icon:xt},{page:"Guide_to_toxins",text:"toxin",icon:ht},{page:"Guide_to_xenobiology",text:"XBIO",icon:ft},{page:"Guide_to_genetics",icon:Qe},{page:"Guide_to_cytology",text:"cyto",icon:Ot},{page:"Guide_to_Circuits",text:"circ",icon:jt}]},{name:"Service",tabs:[{page:"Guide_to_food",text:"food",icon:yt},{page:"Guide_to_drinks",text:"drnk",icon:zt},{page:"Guide_to_Restaurant",text:"TOUR",icon:Vt},{page:"Guide_to_hydroponics",icon:kt},{page:"Supply_crates",icon:Lt},{page:"Auxiliary_Base_Construction_Area",text:"aux",icon:Tt}]},{name:"Security",tabs:[{page:"Guide_to_security",text:"security",icon:Ct},{page:"Space_Law",text:"space law",icon:_t},{page:"Standard_Operating_Procedure",text:"S.O.P.",icon:wt},{page:"Guide_to_trials",text:"trials",icon:At},{page:"Guide_to_Combat",icon:Rt}]},{name:"Antag",tabs:[{page:"Traitor",icon:Mt},{page:"Makeshift_weapons",icon:$t},{page:"Syndicate_Items",text:"uplk",icon:qt},{page:"Illicit_Access",icon:Dt},{page:"Revolutionary",text:"rev",icon:Nt},{page:"Blood_Cult",text:"cult",icon:It},{page:"Nuclear_Operative",text:"nuke",icon:Bt},{page:"Guide_to_malfunction",icon:Gt},{page:"Xenos",text:"XENO",icon:Pt},{page:"Abductor",icon:Wt},{page:"Families",icon:ue},{page:"Heretic",icon:null}]},{name:"Other",tabs:[{page:"Rules",text:"rules",icon:pt},{page:"AI_modules",text:"aimo",icon:bt},{page:"Hacking",icon:Ht},{page:"Critters",icon:gt},{page:"Guide_to_races",icon:vt},{page:"Paper_Markdown",text:"PAPER",icon:null},{page:"Songs",icon:Et},{page:"Guide_to_Space_Exploration",icon:St},{page:"Mafia",text:"mfia",icon:ue}]},{name:ye,tabs:[{page:"$Welcome",text:"HOME",icon:null},{page:"$Changelog",text:"LOG",icon:null}]}];var ke="./assets/unknown.d27620e1.svg",Ft="./assets/icon-meta.b2955230.svg";function he(e){const t=document.createElement("div");t.className="speen";const a=document.createElement("img");a.src=_e,t.appendChild(a),e.appendChild(t)}async function fe(e,t,a){if(e.startsWith("$"))return re(e,t),t.classList.remove("waiting"),t;let n=null;const r=`page:${e}`,o=document.createElement("div");if(o.className="wrapper",a)try{const s=await de.get(r);if(s){const i=e in w?w[e]:w.$DEFAULT;s.version===i?(console.log(`${e}: found cached entry`),n=s.value):console.log(`${e}: found outdated cache entry`)}}catch(s){console.log(`${e}: failed to retrieve cache entry:`,s)}if(n)o.innerHTML=n,We();else{console.log(`${e}: fetching`);let s=0;for(;s<5;)try{n=await Ae(e);break}catch{s+=1,await qe(1e3)}n=n.replace(/"\/wiki/gi,'"//tgproxy.ovo.ovh/wiki'),await P(),o.innerHTML=n,console.log(`${e}: processing`);try{Me(e,o)}catch(l){console.error(`Error processing page: ${e}`),console.error(l)}const i=e in w?w[e]:w.$DEFAULT;de.set(r,o.innerHTML,i).then(()=>{console.log(`${e}: saved to cache`)})}return t.innerHTML=o.outerHTML,re(e,t),t.classList.remove("waiting"),t}class q{constructor(t,a,n){this.sections={},this.sectionMap={},this.loading=!1,this.cacheEnabled=!0,this.sectionListContainer=t,this.tabListContainer=a,this.tabContentContainer=n,q.instance=this}setLoading(t){if(t)document.getElementById("app").classList.add("waiting"),he(this.tabContentContainer),this.tabContentContainer.querySelector(".speen").appendChild(document.createTextNode("Loading wiki pages"));else{document.getElementById("app").classList.remove("waiting");const a=this.tabContentContainer.querySelector(".speen");this.tabContentContainer.removeChild(a)}}createSection(t){const a=document.createElement("div");if(a.className="section",a.dataset.section=t,t===ye){const n=document.createElement("img");n.src=Ft,n.className="meta-icon",a.appendChild(n)}else a.appendChild(document.createTextNode(t));a.addEventListener("click",()=>{a.classList.contains("active")||this.showSection(t)}),this.sectionListContainer.appendChild(a),this.sections[t]={name:t,element:a,tabs:{}}}showSection(t){const a=this.sectionListContainer.querySelector(".active");a&&(a.classList.remove("active"),this.tabListContainer.querySelectorAll(`div[data-section='${a.dataset.section}']`).forEach(n=>n.classList.add("hidden"))),this.sections[t].element.classList.add("active"),this.tabListContainer.querySelectorAll(`div[data-section='${t}']`).forEach(n=>n.classList.remove("hidden"))}async openTab(t,a,n){const{icon:r,active:o,text:s}=n,i=document.createElement("div");i.className="tab",i.dataset.section=t,i.dataset.tab=a,i.addEventListener("click",()=>{i.classList.contains("active")||(this.setActive(a),j(a,""))});const l=document.createElement("img");l.src=r||ke,i.title=a.replace(/_/gi," "),i.appendChild(l);const c=s||a.substr(a.lastIndexOf("_")+1,4);if(i.appendChild(document.createTextNode(c)),this.tabListContainer.appendChild(i),a.startsWith("$")){const p=this.tabContentContainer.querySelector(`div[data-tab='${a}']`);this.sections[t].tabs[a]={tabListItem:i,tabContentItem:p},this.sectionMap[a]=t,await fe(a,p,this.cacheEnabled);return}const d=document.createElement("div");d.className="page waiting",d.dataset.tab=a,he(d),this.tabContentContainer.appendChild(d),this.sections[t].tabs[a]={tabListItem:i,tabContentItem:d},this.sectionMap[a]=t,this.sections[t].element.classList.contains("active")||i.classList.add("hidden");const h=await fe(a,d,this.cacheEnabled);h!==d&&(this.sections[t].tabs[a].tabContentItem=h),o&&this.setActive(a)}setActive(t){const a=this.sectionMap[t];if(!(a in this.sections))throw new Error("section not found");if(!(t in this.sections[a].tabs))throw new Error("tab not found");this.tabListContainer.querySelectorAll(".active").forEach(s=>s.classList.remove("active")),this.tabContentContainer.querySelectorAll(".active").forEach(s=>s.classList.remove("active")),this.sections[a].element.classList.contains("active")||this.showSection(a);const{tabListItem:r,tabContentItem:o}=this.sections[a].tabs[t];this.sections[a].element.classList.add("active"),r.classList.add("active"),o.classList.add("active")}}async function Ut(){const e=document.getElementById("section-list"),t=document.getElementById("tab-list"),a=document.getElementById("tabs"),n=new q(e,t,a);n.setLoading(!0),await P();const r=document.querySelector("#tabs > .speen"),o=document.createElement("div");o.className="loading-icons";let s=[];me.forEach(i=>i.tabs.forEach(l=>{const c=document.createElement("img");c.dataset.tab=l.page,c.src=l.icon||ke,c.title=l.page.replace(/_/gi," "),o.appendChild(c)})),r.appendChild(o),s=me.flatMap(i=>(n.createSection(i.name),i.tabs.map(async l=>{await n.openTab(i.name,l.page,{icon:l.icon,text:l.text}),o.removeChild(o.querySelector(`img[data-tab='${l.page}']`))}))),Promise.all(s).then(()=>{n.setLoading(!1);{const{path:i,hash:l}=Ie();ve(i,l)||(n.setActive("$Welcome"),n.showSection("Medical"))}})}if("serviceWorker"in navigator){const e={}.VITE_SUBDIR?`${{}.VITE_SUBDIR}/sw.js`:"sw.js";navigator.serviceWorker.register(e).then(t=>{console.log("Registration successful, scope is:",t.scope)}).catch(t=>{console.log("Service worker registration failed, error:",t)})}Ut();document.body.appendChild(Ge());document.getElementById("tgh-version").appendChild(document.createTextNode("26f950ce68d588113048d8b0c3a4bc06e35d757d"));
